<!DOCTYPE html>
<html>

<head>
	<meta name="google-signin-scope" content="profile email">
	<meta name="google-signin-client_id" content="1052254226797-5pgje9r7epjv1j2grrm5kmtolr9pu862.apps.googleusercontent.com">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Heaps Of Fun</title>
	<meta name="viewport" content="width=device-width">
	<meta name="description" content="PennApps 2016 Winter Hackathon Project">
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.indigo-pink.min.css">
	<script src="http://js.nicedit.com/nicEdit-latest.js"></script>
	<script src="selection.js"></script>
	<link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.cyan-light_blue.min.css" />
	<script src="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.min.js"></script>
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	
	<script>
	bkLib.onDomLoaded(function()
	{
		new nicEditor().panelInstance('NicEdit');
	});
	</script>
	
	<script>
	$(document).ready(function() {
		clear();
		h_yellow();
		h_green();
		tab();
	});
	</script>
	<script type="text/javascript">
		$.ajax({
    type:     "GET",
    url:      "https://http://freetexthost.com/r56ct5aw03", // <-- Here
    dataType: "jsonp",
    success: function(data){
        console.log(data);
    }
});
	</script>
	<style>
	.mdl-textfield {
		width: 100%;
	}
	</style>
</head>

<body>
	<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header
	mdl-layout--fixed-tabs">
	<header class="mdl-layout__header">
		<div class="mdl-layout__header-row">
			<!-- Title -->
			<span class="mdl-layout-title">Heaps of Fun</span>
		</div>
		<!-- Tabs -->
		<div class="mdl-layout__tab-bar mdl-js-ripple-effect">
			<a href="#fixed-tab-1" class="mdl-layout__tab is-active">About</a>
			<a href="#fixed-tab-2" class="mdl-layout__tab">Try it out</a>

		</div>
	</header>
	<main class="mdl-layout__content">
		<section class="mdl-layout__tab-panel is-active" id="fixed-tab-1">
			<div class="page-content">
				<div id="bar">
					<h4> Our App </h4>
					<p>Descriptions go here</p>
					<hr>
					<h4>Our Team</h4>
					<div class="mdl-grid">
						<div class="mdl-cell mdl-cell--3-col">
							<img class="img-circle" border="0" alt="" src="grace.jpg" width="200" height="200"> 
							<br> Grace Huang <br> E'18, DMD <br>
						</div>
						<div class="mdl-cell mdl-cell--3-col">
							<img class="img-circle" border="0" alt="" src="rachel.jpg" width="200" height="200"> 
							<br> Rachel (Qiao) Han <br> E'18, CIS <br>
						</div>
						<div class="mdl-cell mdl-cell--3-col">
							<img class="img-circle" border="0" alt="" src="karen.jpg" width="200" height="200">
							<br> Karen Her <br> E'18, CIS <br>
						</div>
						<div class="mdl-cell mdl-cell--3-col">
							<img class="img-circle" border="0" alt="" src="karinna.jpg" width="200" height="200">
							<br> Karinna Loo <br> E'18, NETS <br>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="mdl-layout__tab-panel" id="fixed-tab-2">
			<div class="page-content">
				<div class="mdl-grid">
					<!-- left column ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
					<div class="mdl-cell mdl-cell--6-col" id="left-column">
						This is where your text goes
						<br>
						<p id="submitted-text"></p>
						<form id="input-text" onsubmit="submitText()">
							<div class="mdl-textfield mdl-js-textfield">
								<textarea class="mdl-textfield__input" type="text" rows= "8" id="text-box" ></textarea>
								<label class="mdl-textfield__label" for="sample5">Text lines...</label>
							</div><br>
							<input type="button" class="mdl-button mdl-js-button mdl-button--raised" onclick = "submitText()" value = "submit">
							<input type="button" class="mdl-button mdl-js-button mdl-button--raised" onclick = "resetText()" value = "reset">
						</input>
					</form>
				</div>
				<!-- right column ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
				<div class="mdl-cell mdl-cell--6-col" id="right-column">
					This is where we display the outline 
					<br>
					<textarea id = "NicEdit" cols="80" rows="15">
						Some Sample Text 
					</textarea>
					<input type="button" class="mdl-button mdl-js-button mdl-button--raised" onclick = "" value = "save to googledoc">
					<!-- <input id="toGoogleDoc" type="button" value="Export To Google Docs" onclick="onSignIn(googleUser);">  -->
					<button class="g-signin"
						id = "googleDocButton" 
						style = "visibility: hidden"
	                    data-scope="https://www.googleapis.com/auth/drive"
	                    data-requestvisibleactions="http://schemas.google.com/AddActivity"
	                    data-clientId="1052254226797-5pgje9r7epjv1j2grrm5kmtolr9pu862.apps.googleusercontent.com"
	                    data-theme="dark"
	                    data-cookiepolicy="single_host_origin"> 
	                </button>
                
					<input type="button" class="mdl-button mdl-js-button mdl-button--raised" onclick = "" value = "reset">
				</div>
			</div>
		</section>
	</main>
	<footer class="mdl-mini-footer">
		<div class="mdl-mini-footer__left-section">
			<div class="mdl-logo">Heaps Of Fun</div>
			<ul class="mdl-mini-footer__link-list">
				<li><a href="mailto:hanqiao69@gmail.com">Email Us</a></li>
			</ul>
		</div>
	</footer>
</div>


<script type="text/javascript">
function handleClientLoad() {
	console.log("HANDLE CLIENT LOAD");

    window.setTimeout(checkAuth1,1);
  }


function submitform()
{
	document.getElementById("input-text").submit();
}


function createDoc() {
	const boundary = '-------314159265358979323846';
	const delimiter = "\r\n--" + boundary + "\r\n";
	const close_delim = "\r\n--" + boundary + "--";

    var metadata = JSON.stringify({
		      "name" : "Heaps of Fun Document",
		      "mimeType" : "application/rtf",
		      "description" : "This is a test of creating a metafile",
		      });
    
    //var snippet = document.getElementById("NicEditMain").value;
    var snippet = '';
    $( "#startList > li" ).each(function() {
    	snippet+='\u2022 ';
    	snippet+=$( this ).text();
    	console.log($( this ).text());
    	snippet+='\n';
    	console.log("HI: " + snippet);
    });
    
    console.log("SNIPPET: " + snippet);
    
    var bodyText = 
    	delimiter +
        'Content-Type: application/json\r\n\r\n' +
        metadata +
        delimiter +
        'Content-Type: application/rtf\r\n' +
        'Content-Length:' + snippet.length + '\r\n' +
        '\r\n' +
        snippet +
        close_delim;
    
    console.log(bodyText);
    
	var request = gapi.client.request({
		   'path': '/upload/drive/v3/files',
		   'params' : {'uploadType': 'multipart'},
		   'method': 'POST',
		   'headers': {'Content-Type': 'multipart/mixed; boundary="' + boundary + '"'},
		   'body': bodyText
		   });

 	request.execute(function(resp){
		console.log(resp);
		window.confirm("sometext");
	});
	
}

function handleAuthResult(authResult) {
	console.log(authResult);
    var authorizeButton = document.getElementById('googleDocButton');
    
    if (!authResult || authResult.error) {
      console.log("AUTH HAD ERROR");
      authorizeButton.style.visibility = 'hidden';
    } else {
      authorizeButton.style.visibility = 'visible';
      authorizeButton.onclick = createDoc;
    }
  }

function checkAuth1() {
	console.log("CHECK AUTH WAS CALLED");
	gapi.auth.authorize({client_id: "1052254226797-5pgje9r7epjv1j2grrm5kmtolr9pu862.apps.googleusercontent.com", scope: ["https://www.googleapis.com/auth/drive"], immediate: true}, handleAuthResult);
}	   

</script>
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
</body>
</html>
